name: Housekeeping

on:
  release:

# A workflow run is made up of 1+ jobs that can run sequentially or in parallel
# Steps represent a sequence of tasks that will be executed as part of a job

jobs:
  # When a release is published, bump the corresponding short tag.
  # For example, when v1.0.4 was published, update v1 to v1.0.4's SHA.
  # TODO: Only run when tag_name matches /v[0-9]+\.[0-9]+\.[0-9]+/.
  # TODO: (step) Only update when the published release is also the latest.
  updateshorttag:
    runs-on: ubuntu-latest
    if: github.event_name == 'release' && github.event.action == 'published'

    steps:
    - name: Update the short tag to match the release tag
      run: echo "{{ github.event_name }} {{ github.event.action }}"
      run: echo "{{ github.event.tag_name }}"
